<?php

/**
 * Adjusts field_az_media_image in az_news so that it permits remote videos
 * in addition to the default image teaser.
 */
function enable_hero_video() {
    // print('Did this even run?');
    // echo $message;
    // $message = 'Did this even run?';
    // error_log($message);
    // \Drupal::logger('uahs_news')->notice($message);
    $config_factory = \Drupal::configFactory();
    $config = $config_factory->getEditable('field.field.node.az_news.field_az_media_image');
    // $config_item = $config->get('settings.handler_settings');
    // print_r($config_item);
    $config->set('settings.handler_settings.target_bundles', [
        'az_image' => 'az_image',
        'az_remote_video' => 'az_remote_video'
    ]);
    // $config_item = $config->get('settings.handler_settings');
    // print_r($config_item);
    $config->save(TRUE);
}

/**
 * Restores az_news.field_az_media_image to its default settings â€“ only accepting a single image.
 */
function disable_hero_video() {
    $config_factory = \Drupal::configFactory();
    $config = $config_factory->getEditable('field.field.node.az_news.field_az_media_image');
    $config->set('settings.handler_settings.target_bundles', [
        'az_image' => 'az_image'
    ]);
    $config->save(TRUE);
}

/**
 * Adds a Very Small media display that can be used when embedding images.
 */
function add_very_small_image_display() {
    return;
}

/**
 * Removes the Very Small media display.
 */
function remove_very_small_image_display() {
    return;
}


function uahs_news_install() {
    enable_hero_video();
    add_very_small_image_display();
}


function uahs_news_uninstall() {
    disable_hero_video();
    remove_very_small_image_display();
}